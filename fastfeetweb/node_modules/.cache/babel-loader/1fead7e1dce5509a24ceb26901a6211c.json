{"ast":null,"code":"import { all, takeLatest, call, put } from 'redux-saga/effects';\nimport { toast } from 'react-toastify';\nimport { updateSuccess, addSuccess } from './actions';\nimport api from '../../../services/api';\nimport history from '../../../services/history';\nexport function* update({\n  payload\n}) {\n  try {\n    const {\n      id,\n      product\n    } = payload.order;\n    yield call(api.put, `orders/${id}`, {\n      product\n    });\n    yield put(updateSuccess({\n      product\n    }));\n    toast.success('Encomenda atualizada com sucesso!');\n    history.push('/encomendas');\n  } catch (error) {\n    toast.error('Falha na atualização da encomenda, verifique os campos novamente.');\n  }\n}\nexport function* addOrder({\n  payload\n}) {\n  try {\n    const {\n      product,\n      recipient_id,\n      delivaryman_id\n    } = payload;\n    console.tron.log(payload.data);\n    yield call(api.post, `orders`, {\n      product,\n      recipient_id,\n      delivaryman_id\n    });\n    yield put(addSuccess({\n      product,\n      recipient_id,\n      delivaryman_id\n    }));\n    toast.success('Encomenda criada com sucesso!');\n    history.push('/encomendas');\n  } catch (error) {\n    toast.error('Falha na atualização da encomenda, verifique os campos novamente.');\n  }\n}\nexport default all([takeLatest('@order/UPDATE_REQUEST', update), takeLatest('@order/ADD_REQUEST', addOrder)]);","map":{"version":3,"sources":["/Users/leticiabarreto/Documents/RocketSeat/GoStackAulas/Bootcamp-GoStack-DesafioFinal/fastfeetweb/src/store/modules/orders/sagas.js"],"names":["all","takeLatest","call","put","toast","updateSuccess","addSuccess","api","history","update","payload","id","product","order","success","push","error","addOrder","recipient_id","delivaryman_id","console","tron","log","data","post"],"mappings":"AAAA,SAASA,GAAT,EAAcC,UAAd,EAA0BC,IAA1B,EAAgCC,GAAhC,QAA2C,oBAA3C;AACA,SAASC,KAAT,QAAsB,gBAAtB;AAEA,SAASC,aAAT,EAAwBC,UAAxB,QAA0C,WAA1C;AACA,OAAOC,GAAP,MAAgB,uBAAhB;AACA,OAAOC,OAAP,MAAoB,2BAApB;AAEA,OAAO,UAAUC,MAAV,CAAiB;AAAEC,EAAAA;AAAF,CAAjB,EAA8B;AACnC,MAAI;AACF,UAAM;AAAEC,MAAAA,EAAF;AAAMC,MAAAA;AAAN,QAAkBF,OAAO,CAACG,KAAhC;AAEA,UAAMX,IAAI,CAACK,GAAG,CAACJ,GAAL,EAAW,UAASQ,EAAG,EAAvB,EAA0B;AAClCC,MAAAA;AADkC,KAA1B,CAAV;AAIA,UAAMT,GAAG,CAACE,aAAa,CAAC;AAAEO,MAAAA;AAAF,KAAD,CAAd,CAAT;AACAR,IAAAA,KAAK,CAACU,OAAN,CAAc,mCAAd;AAEAN,IAAAA,OAAO,CAACO,IAAR,CAAa,aAAb;AACD,GAXD,CAWE,OAAOC,KAAP,EAAc;AACdZ,IAAAA,KAAK,CAACY,KAAN,CACE,mEADF;AAGD;AACF;AAED,OAAO,UAAUC,QAAV,CAAmB;AAAEP,EAAAA;AAAF,CAAnB,EAAgC;AACrC,MAAI;AACF,UAAM;AAAEE,MAAAA,OAAF;AAAWM,MAAAA,YAAX;AAAyBC,MAAAA;AAAzB,QAA4CT,OAAlD;AACAU,IAAAA,OAAO,CAACC,IAAR,CAAaC,GAAb,CAAiBZ,OAAO,CAACa,IAAzB;AACA,UAAMrB,IAAI,CAACK,GAAG,CAACiB,IAAL,EAAY,QAAZ,EAAqB;AAC7BZ,MAAAA,OAD6B;AAE7BM,MAAAA,YAF6B;AAG7BC,MAAAA;AAH6B,KAArB,CAAV;AAMA,UAAMhB,GAAG,CAACG,UAAU,CAAC;AAAEM,MAAAA,OAAF;AAAWM,MAAAA,YAAX;AAAyBC,MAAAA;AAAzB,KAAD,CAAX,CAAT;AACAf,IAAAA,KAAK,CAACU,OAAN,CAAc,+BAAd;AAEAN,IAAAA,OAAO,CAACO,IAAR,CAAa,aAAb;AACD,GAbD,CAaE,OAAOC,KAAP,EAAc;AACdZ,IAAAA,KAAK,CAACY,KAAN,CACE,mEADF;AAGD;AACF;AAED,eAAehB,GAAG,CAAC,CACjBC,UAAU,CAAC,uBAAD,EAA0BQ,MAA1B,CADO,EAEjBR,UAAU,CAAC,oBAAD,EAAuBgB,QAAvB,CAFO,CAAD,CAAlB","sourcesContent":["import { all, takeLatest, call, put } from 'redux-saga/effects';\nimport { toast } from 'react-toastify';\n\nimport { updateSuccess, addSuccess } from './actions';\nimport api from '../../../services/api';\nimport history from '../../../services/history';\n\nexport function* update({ payload }) {\n  try {\n    const { id, product } = payload.order;\n\n    yield call(api.put, `orders/${id}`, {\n      product,\n    });\n\n    yield put(updateSuccess({ product }));\n    toast.success('Encomenda atualizada com sucesso!');\n\n    history.push('/encomendas');\n  } catch (error) {\n    toast.error(\n      'Falha na atualização da encomenda, verifique os campos novamente.'\n    );\n  }\n}\n\nexport function* addOrder({ payload }) {\n  try {\n    const { product, recipient_id, delivaryman_id } = payload;\n    console.tron.log(payload.data);\n    yield call(api.post, `orders`, {\n      product,\n      recipient_id,\n      delivaryman_id,\n    });\n\n    yield put(addSuccess({ product, recipient_id, delivaryman_id }));\n    toast.success('Encomenda criada com sucesso!');\n\n    history.push('/encomendas');\n  } catch (error) {\n    toast.error(\n      'Falha na atualização da encomenda, verifique os campos novamente.'\n    );\n  }\n}\n\nexport default all([\n  takeLatest('@order/UPDATE_REQUEST', update),\n  takeLatest('@order/ADD_REQUEST', addOrder),\n]);\n"]},"metadata":{},"sourceType":"module"}
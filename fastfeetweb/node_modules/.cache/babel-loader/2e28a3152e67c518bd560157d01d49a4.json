{"ast":null,"code":"var _jsxFileName = \"/Users/leticiabarreto/Documents/RocketSeat/GoStackAulas/Bootcamp-GoStack-DesafioFinal/fastfeetweb/src/pages/Encomendas/EdicaoEncomendas/index.js\";\nimport React, { useEffect, useState } from 'react';\nimport PropTypes from 'prop-types';\nimport { MdCheck, MdKeyboardArrowLeft } from 'react-icons/md';\nimport { Form, Input } from '@rocketseat/unform';\nimport Select from 'react-select';\nimport * as Yup from 'yup';\nimport { useDispatch } from 'react-redux';\nimport { Container, EditOrder, FormOrder } from './styles';\nimport HeaderPages from '../../../components/HeaderPages';\nimport history from '../../../services/history';\nimport IconButton from '../../../components/IconButton';\nimport ButtonBack from '../../../components/ButtonBack';\nimport api from '../../../services/api';\nimport * as OrdersActions from '../../../store/modules/orders/actions';\nconst schema = Yup.object().shape({\n  product: Yup.string().required('O nome do produto é obrigatório')\n});\nexport default function EdicaoEncomendas({\n  match\n}) {\n  const dispatch = useDispatch();\n  const {\n    id\n  } = match.params;\n  const [order, setOrders] = useState('');\n  const [recipient, setRecipients] = useState([]);\n  const [delivery, setDeliveries] = useState([]);\n  const [product, setProducts] = useState([]);\n  useEffect(() => {\n    async function loadOrder() {\n      if (id) {\n        const response = await api.get(`orders/${id}`);\n        const currentRecipient = {\n          value: response.data.recipient.id,\n          label: response.data.recipient.name\n        };\n        const currentDelivery = {\n          value: response.data.delivery.id,\n          label: response.data.delivery.name\n        };\n        response.data.currentRecipient = currentRecipient;\n        response.data.currentDelivery = currentDelivery;\n        setOrders(response.data);\n      }\n    }\n\n    async function loadRecipients() {\n      const response = await api.get('/recipient');\n      const data = response.data.map(recipient => ({\n        value: recipient.id,\n        label: recipient.name\n      }));\n      setRecipients(data);\n    }\n\n    async function loadDeliveries() {\n      const response = await api.get('/deliveries');\n      const dataDelivery = response.data.map(delivery => ({\n        value: delivery.id,\n        label: delivery.name\n      }));\n      setDeliveries(dataDelivery);\n    }\n\n    loadOrder();\n    loadRecipients();\n    loadDeliveries();\n  }, [id]);\n\n  async function handleSubmit({\n    product\n  }) {\n    dispatch(OrdersActions.updateRequest({\n      id,\n      product\n    }));\n  }\n\n  const handleRecipientChange = e => {\n    order.recipient_id = e.value;\n    console.tron.log(order.recipient_id);\n    setRecipients(order.recipient_id);\n  };\n\n  const handleDeliverymanChange = e => {\n    order.delivaryman_id = e.value;\n    console.tron.log(order.delivaryman_id);\n    setDeliveries(order.delivaryman_id);\n  };\n\n  const handleProductChange = e => {\n    order.product = e.target.value;\n    console.tron.log('Product', e.target.value);\n    setProducts(order.product);\n  };\n\n  return React.createElement(Container, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104\n    },\n    __self: this\n  }, React.createElement(EditOrder, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105\n    },\n    __self: this\n  }, React.createElement(Form, {\n    initialData: order,\n    schema: schema,\n    onSubmit: handleSubmit,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106\n    },\n    __self: this\n  }, React.createElement(HeaderPages, {\n    title: \"Edi\\xE7\\xE3o de Encomendas\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107\n    },\n    __self: this\n  }, React.createElement(ButtonBack, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108\n    },\n    __self: this\n  }), React.createElement(IconButton, {\n    Icon: MdCheck,\n    title: \"SALVAR\",\n    type: \"submit\",\n    onClick: handleSubmit,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109\n    },\n    __self: this\n  })), React.createElement(FormOrder, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"divSelect\",\n    id: \"recipient_id\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117\n    },\n    __self: this\n  }, React.createElement(\"label\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118\n    },\n    __self: this\n  }, \"Destinat\\xE1rio\"), React.createElement(Select, {\n    className: \"rec\",\n    name: \"recipient_id\",\n    placeholder: order ? order.recipient.name : 'Selecione um entregador... ',\n    defaultValue: order.recipient_id,\n    options: recipient,\n    onChange: handleRecipientChange,\n    isDisabled: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    className: \"divSelect\",\n    id: \"delivaryman_id\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131\n    },\n    __self: this\n  }, React.createElement(\"label\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132\n    },\n    __self: this\n  }, \"Entregadores\"), React.createElement(Select, {\n    className: \"del\",\n    name: \"delivaryman_id\",\n    placeholder: order ? order.delivery.name : 'Selecione um entregador... ',\n    defaultValue: order.delivaryman_id,\n    options: delivery,\n    onChange: handleDeliverymanChange,\n    isDisabled: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    className: \"divInp\",\n    id: \"product\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145\n    },\n    __self: this\n  }, React.createElement(\"label\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146\n    },\n    __self: this\n  }, \"Nome do produto\"), React.createElement(Input, {\n    name: \"product\",\n    placeholder: \"Nome do produto\",\n    onChange: handleProductChange,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147\n    },\n    __self: this\n  }))))));\n}\nEdicaoEncomendas.propTypes = {\n  match: PropTypes.shape({\n    params: PropTypes.shape({\n      id: PropTypes.string\n    }).isRequired\n  }).isRequired\n};","map":{"version":3,"sources":["/Users/leticiabarreto/Documents/RocketSeat/GoStackAulas/Bootcamp-GoStack-DesafioFinal/fastfeetweb/src/pages/Encomendas/EdicaoEncomendas/index.js"],"names":["React","useEffect","useState","PropTypes","MdCheck","MdKeyboardArrowLeft","Form","Input","Select","Yup","useDispatch","Container","EditOrder","FormOrder","HeaderPages","history","IconButton","ButtonBack","api","OrdersActions","schema","object","shape","product","string","required","EdicaoEncomendas","match","dispatch","id","params","order","setOrders","recipient","setRecipients","delivery","setDeliveries","setProducts","loadOrder","response","get","currentRecipient","value","data","label","name","currentDelivery","loadRecipients","map","loadDeliveries","dataDelivery","handleSubmit","updateRequest","handleRecipientChange","e","recipient_id","console","tron","log","handleDeliverymanChange","delivaryman_id","handleProductChange","target","propTypes","isRequired"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport PropTypes from 'prop-types';\nimport { MdCheck, MdKeyboardArrowLeft } from 'react-icons/md';\nimport { Form, Input } from '@rocketseat/unform';\nimport Select from 'react-select';\nimport * as Yup from 'yup';\nimport { useDispatch } from 'react-redux';\n\nimport { Container, EditOrder, FormOrder } from './styles';\nimport HeaderPages from '../../../components/HeaderPages';\nimport history from '../../../services/history';\nimport IconButton from '../../../components/IconButton';\nimport ButtonBack from '../../../components/ButtonBack';\nimport api from '../../../services/api';\nimport * as OrdersActions from '../../../store/modules/orders/actions';\n\nconst schema = Yup.object().shape({\n  product: Yup.string().required('O nome do produto é obrigatório'),\n});\n\nexport default function EdicaoEncomendas({ match }) {\n  const dispatch = useDispatch();\n\n  const { id } = match.params;\n  const [order, setOrders] = useState('');\n  const [recipient, setRecipients] = useState([]);\n  const [delivery, setDeliveries] = useState([]);\n  const [product, setProducts] = useState([]);\n\n  useEffect(() => {\n    async function loadOrder() {\n      if (id) {\n        const response = await api.get(`orders/${id}`);\n\n        const currentRecipient = {\n          value: response.data.recipient.id,\n          label: response.data.recipient.name,\n        };\n\n        const currentDelivery = {\n          value: response.data.delivery.id,\n          label: response.data.delivery.name,\n        };\n\n        response.data.currentRecipient = currentRecipient;\n        response.data.currentDelivery = currentDelivery;\n\n        setOrders(response.data);\n      }\n    }\n\n    async function loadRecipients() {\n      const response = await api.get('/recipient');\n\n      const data = response.data.map(recipient => ({\n        value: recipient.id,\n        label: recipient.name,\n      }));\n\n      setRecipients(data);\n    }\n\n    async function loadDeliveries() {\n      const response = await api.get('/deliveries');\n\n      const dataDelivery = response.data.map(delivery => ({\n        value: delivery.id,\n        label: delivery.name,\n      }));\n\n      setDeliveries(dataDelivery);\n    }\n\n    loadOrder();\n    loadRecipients();\n    loadDeliveries();\n  }, [id]);\n\n  async function handleSubmit({ product }) {\n    dispatch(OrdersActions.updateRequest({ id, product }));\n  }\n\n  const handleRecipientChange = e => {\n    order.recipient_id = e.value;\n    console.tron.log(order.recipient_id);\n\n    setRecipients(order.recipient_id);\n  };\n\n  const handleDeliverymanChange = e => {\n    order.delivaryman_id = e.value;\n    console.tron.log(order.delivaryman_id);\n\n    setDeliveries(order.delivaryman_id);\n  };\n\n  const handleProductChange = e => {\n    order.product = e.target.value;\n    console.tron.log('Product', e.target.value);\n    setProducts(order.product);\n  };\n\n  return (\n    <Container>\n      <EditOrder>\n        <Form initialData={order} schema={schema} onSubmit={handleSubmit}>\n          <HeaderPages title=\"Edição de Encomendas\">\n            <ButtonBack />\n            <IconButton\n              Icon={MdCheck}\n              title=\"SALVAR\"\n              type=\"submit\"\n              onClick={handleSubmit}\n            />\n          </HeaderPages>\n          <FormOrder>\n            <div className=\"divSelect\" id=\"recipient_id\">\n              <label>Destinatário</label>\n              <Select\n                className=\"rec\"\n                name=\"recipient_id\"\n                placeholder={\n                  order ? order.recipient.name : 'Selecione um entregador... '\n                }\n                defaultValue={order.recipient_id}\n                options={recipient}\n                onChange={handleRecipientChange}\n                isDisabled\n              />\n            </div>\n            <div className=\"divSelect\" id=\"delivaryman_id\">\n              <label>Entregadores</label>\n              <Select\n                className=\"del\"\n                name=\"delivaryman_id\"\n                placeholder={\n                  order ? order.delivery.name : 'Selecione um entregador... '\n                }\n                defaultValue={order.delivaryman_id}\n                options={delivery}\n                onChange={handleDeliverymanChange}\n                isDisabled\n              />\n            </div>\n            <div className=\"divInp\" id=\"product\">\n              <label>Nome do produto</label>\n              <Input\n                name=\"product\"\n                placeholder=\"Nome do produto\"\n                onChange={handleProductChange}\n              />\n            </div>\n          </FormOrder>\n        </Form>\n      </EditOrder>\n    </Container>\n  );\n}\n\nEdicaoEncomendas.propTypes = {\n  match: PropTypes.shape({\n    params: PropTypes.shape({\n      id: PropTypes.string,\n    }).isRequired,\n  }).isRequired,\n};\n"]},"metadata":{},"sourceType":"module"}
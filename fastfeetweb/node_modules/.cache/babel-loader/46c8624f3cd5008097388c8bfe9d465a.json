{"ast":null,"code":"import { all, takeLatest, call, put } from 'redux-saga/effects';\nimport { toast } from 'react-toastify';\nimport api from '../../../services/api';\nimport history from '../../../services/history';\nimport { deleteSuccess, addSuccess } from './actions';\nexport function* deleteDeliveryman({\n  payload\n}) {\n  try {\n    const {\n      id\n    } = payload;\n    yield call(api.delete, `deliveries/${id}`, {\n      id\n    });\n    yield put(deleteSuccess({\n      id\n    }));\n    toast.success('Entregador deletado com sucesso!');\n    history.push('/entregadores');\n  } catch (error) {\n    toast.error('Falha ao deletar entregador.');\n  }\n}\nexport function* addDeliveryman({\n  payload\n}) {\n  try {\n    const {\n      name,\n      email,\n      avatar_id\n    } = payload;\n    const deliveryman = Object.assign({\n      name,\n      email,\n      avatar_id\n    });\n    const response = yield call(api.post, 'deliveries', deliveryman);\n    yield put(addSuccess(response.data));\n    toast.success('Entregador criado com sucesso!');\n    history.push('/entregadores');\n  } catch (error) {\n    toast.error('Falha ao criar entregador, verifique os dados.');\n  }\n}\nexport function* updateDeliveryman({\n  payload\n}) {\n  try {\n    const {\n      id,\n      name,\n      email,\n      avatar_id\n    } = payload;\n    const deliveryman = Object.assign({\n      name,\n      email,\n      avatar_id\n    });\n    yield call(api.put, `deliveries/${id}`, deliveryman);\n    toast.success('Entregador atualizado com sucesso!');\n    history.push('/entregadores');\n  } catch (error) {\n    toast.error('Falha ao atualizar entregador, verifique os dados.');\n  }\n}\nexport default all([takeLatest('@deliveryman/DELETE_REQUEST', deleteDeliveryman), takeLatest('@deliveryman/ADD_REQUEST', addDeliveryman), takeLatest('@deliveryman/UPDATE_REQUEST', updateDeliveryman)]);","map":{"version":3,"sources":["/Users/leticiabarreto/Documents/RocketSeat/GoStackAulas/Bootcamp-GoStack-DesafioFinal/fastfeetweb/src/store/modules/deliveryman/sagas.js"],"names":["all","takeLatest","call","put","toast","api","history","deleteSuccess","addSuccess","deleteDeliveryman","payload","id","delete","success","push","error","addDeliveryman","name","email","avatar_id","deliveryman","Object","assign","response","post","data","updateDeliveryman"],"mappings":"AAAA,SAASA,GAAT,EAAcC,UAAd,EAA0BC,IAA1B,EAAgCC,GAAhC,QAA2C,oBAA3C;AACA,SAASC,KAAT,QAAsB,gBAAtB;AAEA,OAAOC,GAAP,MAAgB,uBAAhB;AACA,OAAOC,OAAP,MAAoB,2BAApB;AACA,SAASC,aAAT,EAAwBC,UAAxB,QAA0C,WAA1C;AAEA,OAAO,UAAUC,iBAAV,CAA4B;AAAEC,EAAAA;AAAF,CAA5B,EAAyC;AAC9C,MAAI;AACF,UAAM;AAAEC,MAAAA;AAAF,QAASD,OAAf;AAEA,UAAMR,IAAI,CAACG,GAAG,CAACO,MAAL,EAAc,cAAaD,EAAG,EAA9B,EAAiC;AAAEA,MAAAA;AAAF,KAAjC,CAAV;AAEA,UAAMR,GAAG,CAACI,aAAa,CAAC;AAAEI,MAAAA;AAAF,KAAD,CAAd,CAAT;AACAP,IAAAA,KAAK,CAACS,OAAN,CAAc,kCAAd;AAEAP,IAAAA,OAAO,CAACQ,IAAR,CAAa,eAAb;AACD,GATD,CASE,OAAOC,KAAP,EAAc;AACdX,IAAAA,KAAK,CAACW,KAAN,CAAY,8BAAZ;AACD;AACF;AAED,OAAO,UAAUC,cAAV,CAAyB;AAAEN,EAAAA;AAAF,CAAzB,EAAsC;AAC3C,MAAI;AACF,UAAM;AAAEO,MAAAA,IAAF;AAAQC,MAAAA,KAAR;AAAeC,MAAAA;AAAf,QAA6BT,OAAnC;AAEA,UAAMU,WAAW,GAAGC,MAAM,CAACC,MAAP,CAAc;AAAEL,MAAAA,IAAF;AAAQC,MAAAA,KAAR;AAAeC,MAAAA;AAAf,KAAd,CAApB;AAEA,UAAMI,QAAQ,GAAG,MAAMrB,IAAI,CAACG,GAAG,CAACmB,IAAL,EAAW,YAAX,EAAyBJ,WAAzB,CAA3B;AAEA,UAAMjB,GAAG,CAACK,UAAU,CAACe,QAAQ,CAACE,IAAV,CAAX,CAAT;AACArB,IAAAA,KAAK,CAACS,OAAN,CAAc,gCAAd;AAEAP,IAAAA,OAAO,CAACQ,IAAR,CAAa,eAAb;AACD,GAXD,CAWE,OAAOC,KAAP,EAAc;AACdX,IAAAA,KAAK,CAACW,KAAN,CAAY,gDAAZ;AACD;AACF;AAED,OAAO,UAAUW,iBAAV,CAA4B;AAAEhB,EAAAA;AAAF,CAA5B,EAAyC;AAC9C,MAAI;AACF,UAAM;AAAEC,MAAAA,EAAF;AAAMM,MAAAA,IAAN;AAAYC,MAAAA,KAAZ;AAAmBC,MAAAA;AAAnB,QAAiCT,OAAvC;AAEA,UAAMU,WAAW,GAAGC,MAAM,CAACC,MAAP,CAAc;AAAEL,MAAAA,IAAF;AAAQC,MAAAA,KAAR;AAAeC,MAAAA;AAAf,KAAd,CAApB;AAEA,UAAMjB,IAAI,CAACG,GAAG,CAACF,GAAL,EAAW,cAAaQ,EAAG,EAA3B,EAA8BS,WAA9B,CAAV;AAEAhB,IAAAA,KAAK,CAACS,OAAN,CAAc,oCAAd;AAEAP,IAAAA,OAAO,CAACQ,IAAR,CAAa,eAAb;AACD,GAVD,CAUE,OAAOC,KAAP,EAAc;AACdX,IAAAA,KAAK,CAACW,KAAN,CAAY,oDAAZ;AACD;AACF;AAED,eAAef,GAAG,CAAC,CACjBC,UAAU,CAAC,6BAAD,EAAgCQ,iBAAhC,CADO,EAEjBR,UAAU,CAAC,0BAAD,EAA6Be,cAA7B,CAFO,EAGjBf,UAAU,CAAC,6BAAD,EAAgCyB,iBAAhC,CAHO,CAAD,CAAlB","sourcesContent":["import { all, takeLatest, call, put } from 'redux-saga/effects';\nimport { toast } from 'react-toastify';\n\nimport api from '../../../services/api';\nimport history from '../../../services/history';\nimport { deleteSuccess, addSuccess } from './actions';\n\nexport function* deleteDeliveryman({ payload }) {\n  try {\n    const { id } = payload;\n\n    yield call(api.delete, `deliveries/${id}`, { id });\n\n    yield put(deleteSuccess({ id }));\n    toast.success('Entregador deletado com sucesso!');\n\n    history.push('/entregadores');\n  } catch (error) {\n    toast.error('Falha ao deletar entregador.');\n  }\n}\n\nexport function* addDeliveryman({ payload }) {\n  try {\n    const { name, email, avatar_id } = payload;\n\n    const deliveryman = Object.assign({ name, email, avatar_id });\n\n    const response = yield call(api.post, 'deliveries', deliveryman);\n\n    yield put(addSuccess(response.data));\n    toast.success('Entregador criado com sucesso!');\n\n    history.push('/entregadores');\n  } catch (error) {\n    toast.error('Falha ao criar entregador, verifique os dados.');\n  }\n}\n\nexport function* updateDeliveryman({ payload }) {\n  try {\n    const { id, name, email, avatar_id } = payload;\n\n    const deliveryman = Object.assign({ name, email, avatar_id });\n\n    yield call(api.put, `deliveries/${id}`, deliveryman);\n\n    toast.success('Entregador atualizado com sucesso!');\n\n    history.push('/entregadores');\n  } catch (error) {\n    toast.error('Falha ao atualizar entregador, verifique os dados.');\n  }\n}\n\nexport default all([\n  takeLatest('@deliveryman/DELETE_REQUEST', deleteDeliveryman),\n  takeLatest('@deliveryman/ADD_REQUEST', addDeliveryman),\n  takeLatest('@deliveryman/UPDATE_REQUEST', updateDeliveryman),\n]);\n"]},"metadata":{},"sourceType":"module"}